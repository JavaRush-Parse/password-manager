<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="modal" th:replace="~{component/modal :: modal(title='Edit Vault Item', form=~{:: form})}"></div>

    <th:block th:fragment="form">
        <form hx:post="@{/vault-item/save}" hx-target="#modal-backdrop" hx-swap="outerHTML" th:object="${vault}" method="post" class="space-y-5">

            <input th:field="*{id}" type="hidden"/>
            <div>
                <label class="form-label">Name<span class="text-red-600">*</span></label>
                <input type="text" id="name" th:field="*{name}"
                       class="form-input"/>
            </div>
            <div>
                <label class="form-label">Resource</label>
                <input type="text" id="resource" th:field="*{resource}"
                       class="form-input"/>
            </div>
            <div>
                <label class="form-label">Login</label>
                <input type="text" id="login" th:field="*{login}"
                       class="form-input"/>
            </div>
            <div>
                <label class="form-label">Password</label>
                <div id="password-wrapper">
                    <div th:replace="~{fragments/password-input :: password-input(${vault.password})}"></div>
                </div>
            </div>

            <div>
                <label for="collection" class="form-label">Collection</label>
                <select id="collection" th:field="*{collection}" class="form-input">
                    <option value="">Unassigned</option>
                    <option th:each="collection : ${collections}" th:value="${collection.id}"
                            th:text="${collection.name}"
                            th:selected="${vault.collection != null && collection.id == vault.collection.id}"></option>
                </select>
            </div>

            <div>
                <label class="form-label">Description</label>
                <textarea id="description" th:field="*{description}" rows="3"
                          class="form-input"></textarea>
            </div>

            <div class="flex items-center gap-3 pt-2">
                <button type="submit"
                        class="btn-primary">
                    Update Item
                </button>
                <a th:href="@{/}"
                   class="btn-secondary">
                    Cancel
                </a>
            </div>
        </form>
    </th:block>
</body>

</html>